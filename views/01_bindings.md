!SLIDE center

# Views

!SLIDE center

# Bindings, not templates

.notes This is where we differ from rails the most. In the land of Single page JS apps, its not a request -> render -> response cycle. We request data, show it, and then based on events generated by the user or the server, change some or all of the DOM or the data.

!SLIDE center

# Its harder.

.notes Its harder for developers because the whole view system becomes stateful. You have to be wary of many different entry points to a particular state, and you have to be able to deal with inserting new data or removing old data, instead of just rendering once.

!SLIDE center

# We've tried to shift as much of the burden of dynamism onto the framework's shoulders, through bindings.

!SLIDE center

    <h1><%= shop.name %></h1>

# becomes

    <h1 data-bind="shop.name"></h1>

!SLIDE center

    <h1 data-bind="shop.name"></h1>

.notes This establishes a binding to the h1's innerHTML to the value at the keypath 'shop.name'

!SLIDE

<pre><code class="longer">
context.observe 'shop.name', (newName) ->
  thatH1Node.innerHTML = newName
</code></pre>

.notes At the core of it, this is all that is happening.

!SLIDE
<pre><code class="longer html">
&lt;h1 class=&quot;&lt;%= &quot;active&quot; if shop.active %&gt;&quot;&gt;&lt;/h1&gt;
</code></pre>

# becomes
<pre><code class="longer html">
&lt;h1 data-addclass-active=&quot;shop.active&quot;&gt;&lt;/h1&gt;
</code></pre>

!SLIDE
<pre><code class="longerer html">
&lt;input type=&quot;text&quot; value=&quot;&lt;%= product.name %&gt;&quot;&gt;&lt;/input&gt;
</code></pre>

# becomes

<pre><code class="longerer">
&lt;input type=&quot;text&quot; data-bind=&quot;product.name&quot;&gt;&lt;/input&gt;
</code></pre>

!SLIDE

# Loops

!SLIDE

<pre><code class="longer">
&lt;table&gt;
  &lt;tr&gt;
    &lt;th&gt;Name&lt;/th&gt;
    &lt;th&gt;Price&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr data-foreach-product="shop.products"&gt;
    &lt;td data-bind="product.name"&gt;&lt;/td&gt;
    &lt;td data-bind="product.cost"&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
</code></pre>

!SLIDE center

# Mixins

<pre><code class="longer">
&lt;div data-mixin=&quot;animation&quot;&gt;&lt;/div&gt;
</code></pre>


!SLIDE center

# Custom view classes

<pre><code class="longer">
&lt;div data-view=&quot;tooltip&quot;&gt;&lt;/div&gt;
</code></pre>

!SLIDE center

# Liquid style filters

!SLIDE bullets incremental

<pre><code class="longerer">
&lt;div
  data-bind=&quot;product.description | truncate 100, '...'&quot;&gt;
&lt;/div&gt;
</code></pre>

 - They take arguments.

!SLIDE center

# Built in filters

 - get
 - interpolate
 - translate
 - equal

And others

!SLIDE bullets incremental
<pre><code class="longerer">
&lt;li
  data-foreach=&quot;products.sortedBy | get currentSort&quot;&gt;
&lt;/li&gt;
</code></pre>

 - When `products` or `currentSort` changes the whole binding will update.
